{"ast":null,"code":"var _jsxFileName = \"/Users/ak/Desktop/projects/project-3/client/src/hoc/auth.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\nexport default function (SpecificComponent, option, adminRoute = null) {\n  function AuthenticationCheck(props) {\n    let user = useSelector(state => state.user);\n    const dispatch = useDispatch();\n    useEffect(() => {\n      //To know my current status, send Auth request \n      dispatch(auth()).then(response => {\n        //Not Loggined in Status \n        if (!response.payload.isAuth) {\n          if (option) {\n            props.history.push('/login');\n          } //Loggined in Status \n\n        } else {\n          //supposed to be Admin page, but not admin person wants to go inside\n          if (adminRoute && !response.payload.isAdmin) {\n            props.history.push('/');\n          } //Logged in Status, but Try to go into log in page \n          else {\n              if (option === false) {\n                props.history.push('/');\n              }\n            }\n        }\n      });\n    }, []);\n    return /*#__PURE__*/React.createElement(SpecificComponent, Object.assign({}, props, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["/Users/ak/Desktop/projects/project-3/client/src/hoc/auth.js"],"names":["React","useEffect","auth","useSelector","useDispatch","SpecificComponent","option","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin"],"mappings":";;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,0BAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,eAAe,UAAUC,iBAAV,EAA6BC,MAA7B,EAAqCC,UAAU,GAAG,IAAlD,EAAwD;AACnE,WAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAEhC,QAAIC,IAAI,GAAGP,WAAW,CAACQ,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAtB;AACA,UAAME,QAAQ,GAAGR,WAAW,EAA5B;AAEAH,IAAAA,SAAS,CAAC,MAAM;AACZ;AACAW,MAAAA,QAAQ,CAACV,IAAI,EAAL,CAAR,CAAiBW,IAAjB,CAAsBC,QAAQ,IAAI;AAC9B;AACA,YAAI,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MAAtB,EAA8B;AAC1B,cAAIV,MAAJ,EAAY;AACRG,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,QAAnB;AACH,WAHyB,CAI1B;;AACH,SALD,MAKO;AACH;AACA,cAAIX,UAAU,IAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAApC,EAA6C;AACzCV,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH,WAFD,CAGA;AAHA,eAIK;AACD,kBAAIZ,MAAM,KAAK,KAAf,EAAsB;AAClBG,gBAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ;AACJ;AACJ,OAnBD;AAqBH,KAvBQ,EAuBN,EAvBM,CAAT;AAyBA,wBACI,oBAAC,iBAAD,oBAAuBT,KAAvB;AAA8B,MAAA,IAAI,EAAEC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAGH;;AACD,SAAOF,mBAAP;AACH","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect } from 'react';\nimport { auth } from '../_actions/user_actions';\nimport { useSelector, useDispatch } from \"react-redux\";\n\nexport default function (SpecificComponent, option, adminRoute = null) {\n    function AuthenticationCheck(props) {\n\n        let user = useSelector(state => state.user);\n        const dispatch = useDispatch();\n\n        useEffect(() => {\n            //To know my current status, send Auth request \n            dispatch(auth()).then(response => {\n                //Not Loggined in Status \n                if (!response.payload.isAuth) {\n                    if (option) {\n                        props.history.push('/login')\n                    }\n                    //Loggined in Status \n                } else {\n                    //supposed to be Admin page, but not admin person wants to go inside\n                    if (adminRoute && !response.payload.isAdmin) {\n                        props.history.push('/')\n                    }\n                    //Logged in Status, but Try to go into log in page \n                    else {\n                        if (option === false) {\n                            props.history.push('/')\n                        }\n                    }\n                }\n            })\n\n        }, [])\n\n        return (\n            <SpecificComponent {...props} user={user} />\n        )\n    }\n    return AuthenticationCheck\n}\n\n\n"]},"metadata":{},"sourceType":"module"}